---
title: "Project 2"
author: "Jeffrey Zhang and Jaclyn Nguyen"
date: "Monday, February 16, 2015"
output: html_document
---

Project 2 required Jeffrey and I to import a large dataset into Oracle Server and call the data into RStudio for analysis. Below will describe the dataset and the following analysis. 

Dataset: Jcn565_311Calls

Oracle SQL Developer: C##CS329E_JCN565

Rows: 1804 observations

JCN565_311Calls is a collection of 311 Calls in New York City. 311 Call systems traditionally have been used to report incidents where the immediate presence of a police officer is not required, examples such as quality-of-life problems. The dataset will contain the dates, location, office of contact, complaint type, etc.of the 311 call.


![Figure 1. Table Variables](figure/variablenames.png)
__Figure 1. Table Variables__

Figure 1 displays the table variables used for this project.



__1. Loading of R packages: RCurl, ggplot2, dplyr, tidyr (R code not shown)__

```{r, include=FALSE}
library(RCurl)
library (ggplot2)
require(dplyr)
require(tidyr)

```

__2. Call for JCN565_311Calls from the SQL Server using a data frame query__

```{r}
source("../01 Data/data_frame_orcl.R", echo = TRUE)
```
![Figure 2. Sample](figure/sample.png)

Figure 2. Sample of dataset JCN565_311Calls

Figure 2 showcases a sample set of the dataset that we used for analysis. Please note the missing variables. 

__3. Analysis of JCN565_311Calls__
```{r}
source ('../03 Visualization/plot NYC.R', echo = TRUE)
source('../03 Visualization/plotagency.R', echo = TRUE)


complaint <- subset(df, AGENCY == "HPD", select = c(COMPLAINT_TYPE))
ggplot (data = complaint, main = "HPD Complaint Breakdown") + geom_histogram(aes(x = COMPLAINT_TYPE)) + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + ggtitle("HPD Complaint Breakdown")

```
``` {r}
source('../02 Data Wrangling/DR5.R',echo = TRUE)

```


```{r}
# From graph above, we know overall HEAT/HOT WATER problem is most severe, now we want to know in which citys this problem is most significant
# import df1 in Data Folder, which is a df containging all info about HEAT/HOT WATER problem
source ('../01 Data/df1.R')
tbl_df(df1)
# plot
source('../02 Data Wrangling/DR1.R',echo = T)

# Now we know, in BRONX,BROOKLYN and NEW YORK, there are much more complaints than other citis
# So we will focus on these three cities to see which areas are most severe in each city
# since there are too many zipcodes, it is better to represent them by each city and use the histgram

# For BRONX
# import df2
source ('../01 Data/df2.R')
tbl_df(df2)
#plot 
source('../02 Data Wrangling/DR2.R',echo = T)

# For BROOKLYN import df3
source ('../01 Data/df3.R')
tbl_df(df3)
# plot 
source('../02 Data Wrangling/DR3.R',echo = T)

# For NEW YORK import df4
source ('../01 Data/df4.R')
tbl_df(df4)
# plot 
source('../02 Data Wrangling/DR4.R',echo = T)

```
