---
title: "Project 2"
author: "Jeffrey Zhang and Jaclyn Nguyen"
date: "Monday, February 16, 2015"
output: html_document
---

Project 2 required Jeffrey and I to import a large data set onto Oracle Server and call the data into RStudio to analyze. 

Dataset: Jcn565-311Calls

DeScrIBE DATA 



__Loading of necessary R packages: RCurl, ggplot2 (R code not shown)__

```{r, include=FALSE}
library(RCurl)
library (ggplot2)

```{r}
source("../01 Data/data_frame_orcl.R", echo = TRUE)
```

You can also embed plots, for example:

```{r}
ggplot(df, aes(x = LATITUDE, y = LONGITUDE, color = BOROUGH)) + geom_point() +  scale_y_discrete(breaks=df$LATITUDE) + scale_x_discrete(breaks=df$LONGITUDE)
ggplot(data = df) + geom_histogram(aes(x = AGENCY)) + ggtitle("311 Calls to Different Types of Agencies")


complaint <- subset(df, AGENCY == "HPD", select = c(COMPLAINT_TYPE))
View(complaint)
ggplot (data = complaint, main = "HPD Complaint Breakdown") + geom_histogram(aes(x = COMPLAINT_TYPE)) + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + ggtitle("HPD Complaint Breakdown")

```
``` {r, include = FALSE}
require(dplyr)
require(tidyr)

tbl_df(df)
#df %>% select(ADDRESS_TYPE, BOROUGH) %>% filter(ADDRESS_TPYE == "ADDRESS") %>% tbl_df

```

```{r}
# Breakdown of complaints by Borough
df %>% group_by(BOROUGH, COMPLAINT_TYPE)  %>% summarise(sum = sum(COMPLAINT_TYPE)) %>% tbl_df

df2 <- df %>% select(COMPLAINT_TYPE,CITY,INICIDENT_ZIP) %>% filter(COMPLAINT_TYPE %in% 'HEAT/HOT WATER')
ggplot(df2, aes(x = factor(CITY), fill = factor(INICIDENT_ZIP))) + geom_bar(width = 1)+ theme(axis.text.x = element_text(angle = 90, hjust = 1))

# The x-axis is blurry because there are too many cities, but we know in city BRONX,BROOKLYN and NEW YORK, there are much more complaints than other citis.
# so we will focus on these three cities to see which area is most severe in each city
# since there are too many zipcodes, it is better to represent them by each city and use the histgram
# for BRONX
df3 <- df2 %>% select(CITY,INICIDENT_ZIP) %>% filter(CITY %in% 'BRONX')
ggplot(df3) + geom_histogram(colour='darkgreen',aes(x=INICIDENT_ZIP)) + labs(title='HEAT/HOT WATER Compliants Distribution by area in BRONX')+ theme(axis.text.x = element_text(angle = 90, hjust = 1))
# we can do same for BROOKLYN and NEW YORK

```
